{% extends 'base.html' %}

{% block body %}

<h1>Travel {{ travel.pk }}</h1>

<h2>
  {% for item in travel.country.all %}
  {{ item }} {% if forloop.revcounter0 != 0 %}&mdash;{% endif %}
  {% endfor %}
</h2>
{{ travel.start_date }} &mdash; {{ travel.end_date}}
<span class="grey">({{ travel.start_date|timesince:travel.end_date }})</span>
<a href="{% url 'travels:travel-update' travel.pk %}">[edit]</a>
<p><span class="grey">{{ travel.notes|default_if_none:'' }}</span></p>

{% if places %}

<h4>Places</h4>

<a class="button" href="{% url 'travels:place-create' travel.pk %}">add</a>

<table>
  
  {% for place in places %}

  <tr>
    <td><a href="{% url 'travels:place-update' place.pk %}">{{ forloop.counter }}</a></td>
    <td>{{ place.start_date }}</td>
    <td>&mdash;</td>
    <td>{{ place.end_date }}</td>
    <td><span class="grey">{{ place.start_date|timesince:place.end_date }}</span></td>
    <td><strong>{{ place.country.country_name }}</strong></td>
    <td>{{ place.city }}</td>
    <td>{{ place.place|default_if_none:'' }}</td>
  </tr>
  
  {% endfor %}

</table>

{% endif %} {# places #}

{% if journeys %}

<h4>Journeys</h4>

<a class="button" href="{% url 'travels:journey-create' travel.pk %}">add</a>

<table>
  
{% for journey in journeys %}

<tr>
  <td><a href="{% url 'travels:journey-update' journey.pk %}">{{ forloop.counter }}</a></td>
  <td>{{ journey.start_date}}</td>
  <td>{{ journey.end_date|default_if_none:'' }}</td>
  <td>{{ journey.transport_type.name }}</td>
  <td>{{ journey.orig }}</td>
  <td>&rarr;</td>
  <td>{{ journey.dest }}</td>
  <td>{{ journey.notes|default_if_none:'' }}</td>
</tr>

{% endfor %}

</table>

{% endif %} {# journeys #}

{% if flights %}

<h4>Flights</h4>

<table>
  
  {% for flight in flights %}

  <tr>
    <td><a href="{% url 'travels:flight-detail' flight.pk %}">{{ forloop.counter }}</a></td>
    <td>{{ flight.fldate }}</td>
    <td>{{ flight.flfrom2.city }} ({{ flight.flfrom2.iata }})</td>
    <td>&rarr;</td>
    <td>{{ flight.flto2.city }} ({{ flight.flto2.iata }})</td>
    <td><span class="grey">{{ flight.note }}</span></td>
  </tr>

  {% endfor %}

</table>

{% endif %} {# flights #}

{% endblock %}
